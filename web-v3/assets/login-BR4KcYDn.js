import{d as v,r as l,o as x,u as w,l as i,e as u,m as r,G as p,H as m,I as k,J as c,K as g,t as h,k as _}from"./main-C-FGy421.js";import{a as S}from"./index-B9ygI19o.js";const P={class:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 p-4"},U={class:"w-full max-w-md"},V={class:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8"},q={key:0,class:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm"},D=["disabled"],M=["disabled"],R=["disabled"],T={key:0,class:"material-icons animate-spin text-lg"},A=v({__name:"App",setup(E){const{initTheme:y}=w(),o=l(""),n=l(""),t=l(!1),s=l(null);function b(){return new URLSearchParams(window.location.search).get("next")||"/"}async function f(){var d,e;if(!o.value||!n.value){s.value="Please enter username and password";return}t.value=!0,s.value=null;try{const a=new FormData;a.append("username",o.value),a.append("password",n.value),await S.post("/login",a,{headers:{"X-Requested-With":"XMLHttpRequest"}}),window.location.href=b()}catch(a){((d=a.response)==null?void 0:d.status)===401?s.value="Invalid username or password":((e=a.response)==null?void 0:e.status)===403?s.value="Access denied. Please contact administrator.":s.value="Login failed. Please try again."}finally{t.value=!1}}return x(()=>{y()}),(d,e)=>(u(),i("div",P,[r("div",U,[r("div",V,[e[4]||(e[4]=r("div",{class:"text-center mb-8"},[r("h1",{class:"text-3xl font-light text-primary mb-2"},"Script Server"),r("p",{class:"text-gray-500 dark:text-gray-400"},"Sign in to continue")],-1)),s.value?(u(),i("div",q,m(s.value),1)):p("",!0),r("form",{onSubmit:k(f,["prevent"]),class:"space-y-6"},[r("div",null,[e[2]||(e[2]=r("label",{for:"username",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Username ",-1)),c(r("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),type:"text",autocomplete:"username",required:"",disabled:t.value,class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors disabled:opacity-50",placeholder:"Enter your username"},null,8,D),[[g,o.value]])]),r("div",null,[e[3]||(e[3]=r("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Password ",-1)),c(r("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),type:"password",autocomplete:"current-password",required:"",disabled:t.value,class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors disabled:opacity-50",placeholder:"Enter your password"},null,8,M),[[g,n.value]])]),r("button",{type:"submit",disabled:t.value,class:"w-full py-3 bg-primary hover:bg-primary-dark text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},[t.value?(u(),i("span",T,"refresh")):p("",!0),h(" "+m(t.value?"Signing in...":"Sign In"),1)],8,R)],32)]),e[5]||(e[5]=r("p",{class:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400"}," Script Server v2.0 ",-1))])]))}}),B=_(A);B.mount("#app");
