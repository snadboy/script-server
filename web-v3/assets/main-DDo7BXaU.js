const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-BO7XplIC.js","assets/AppLayout.vue_vue_type_script_setup_true_lang-Db-YbZrA.js","assets/pinia-DVfpTBqr.js","assets/main-C-FGy421.js","assets/main-BtBiEiMM.css","assets/index-B9ygI19o.js","assets/ScriptView-BaXSi1xL.js","assets/HistoryView-CmSS7PsO.js","assets/HistoryDetailView-CuaNgiMV.js"])))=>i.map(i=>d[i]);
var mt=Object.defineProperty;var gt=(e,t,n)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Te=(e,t,n)=>gt(e,typeof t!="symbol"?t+"":t,n);import{r as $,c as k,d as we,o as vt,u as Et,a as Rt,b as yt,e as At,s as _t,f as ee,g as wt,p as pe,w as Ct,h as Je,n as Ot,i as F,j as Nt,k as Pt}from"./main-C-FGy421.js";import{d as St,c as It}from"./pinia-DVfpTBqr.js";import{a as xt}from"./index-B9ygI19o.js";class bt{constructor(){Te(this,"client");this.client=xt.create({headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0}),this.client.interceptors.response.use(t=>t,t=>{var n;throw((n=t.response)==null?void 0:n.status)===401&&(window.location.pathname.includes("login")||(window.location.href="/login.html")),t})}async getServerConfig(){const{data:t}=await this.client.get("/conf");return t}async getAuthInfo(){const{data:t}=await this.client.get("/auth/info");return t}async logout(){await this.client.post("/logout")}async getScripts(t){const n=t?{mode:t}:void 0,{data:r}=await this.client.get("/scripts",{params:n});return r}async startExecution(t,n){n.append("__script_name",t);const{data:r}=await this.client.post("/executions/start",n,{headers:{"Content-Type":"multipart/form-data"}});return r}async getActiveExecutions(){const{data:t}=await this.client.get("/executions/active");return t}async getExecutionConfig(t){const{data:n}=await this.client.get(`/executions/config/${t}`);return n}async getExecutionStatus(t){const{data:n}=await this.client.get(`/executions/status/${t}`);return n}async stopExecution(t){await this.client.post(`/executions/stop/${t}`)}async killExecution(t){await this.client.post(`/executions/kill/${t}`)}async cleanupExecution(t){await this.client.post(`/executions/cleanup/${t}`)}async getHistoryShort(){const{data:t}=await this.client.get("/history/execution_log/short");return t}async getHistoryLong(t){const{data:n}=await this.client.get(`/history/execution_log/long/${t}`);return n}async getSchedules(t){const n=t?{script:t}:void 0,{data:r}=await this.client.get("/schedules",{params:n});return r}async createSchedule(t){const{data:n}=await this.client.post("/schedule",t,{headers:{"Content-Type":"multipart/form-data"}});return n}async deleteSchedule(t){await this.client.delete(`/schedules/${t}`)}getWebSocketUrl(t){return`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/${t}`}}const De=new bt,Ze=St("auth",()=>{const e=$(null),t=$(!1),n=$(!1),r=$(null),s=k(()=>e.value?e.value.enabled?!!e.value.username:!0:!1),h=k(()=>{var u;return((u=e.value)==null?void 0:u.admin)??!1}),c=k(()=>{var u;return((u=e.value)==null?void 0:u.username)??null}),p=k(()=>{var u;return((u=e.value)==null?void 0:u.canEditCode)??!1});async function a(){var u;if(!t.value){n.value=!0,r.value=null;try{const o=await De.getAuthInfo();e.value=o,t.value=!0}catch(o){r.value=o instanceof Error?o.message:"Failed to load auth info",((u=o==null?void 0:o.response)==null?void 0:u.status)===401&&(e.value={enabled:!0,admin:!1,canEditCode:!1},t.value=!0,r.value=null)}finally{n.value=!1}}}async function f(){try{await De.logout()}finally{window.location.href="/login.html"}}return{info:e,initialized:t,loading:n,error:r,isAuthenticated:s,isAdmin:h,username:c,canEditCode:p,init:a,logout:f}}),Tt=we({__name:"App",setup(e){const t=Ze(),{initTheme:n}=Et();return vt(async()=>{n(),await t.init()}),(r,s)=>{const h=yt("router-view");return At(),Rt(h)}}}),Dt="modulepreload",kt=function(e){return"/"+e},ke={},oe=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=kt(a),a in ke)return;ke[a]=!0;const f=a.endsWith(".css"),u=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const o=document.createElement("link");if(o.rel=f?"stylesheet":Dt,f||(o.as="script"),o.crossOrigin="",o.href=a,p&&o.setAttribute("nonce",p),document.head.appendChild(o),f)return new Promise((l,d)=>{o.addEventListener("load",l),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}function h(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return s.then(c=>{for(const p of c||[])p.status==="rejected"&&h(p.reason);return t().catch(h)})};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const K=typeof document<"u";function $e(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Lt(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&$e(e.default)}const w=Object.assign;function me(e,t){const n={};for(const r in t){const s=t[r];n[r]=B(s)?s.map(e):e(s)}return n}const te=()=>{},B=Array.isArray;function Le(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const et=/#/g,Gt=/&/g,Bt=/\//g,Vt=/=/g,Ut=/\?/g,tt=/\+/g,Mt=/%5B/g,Ht=/%5D/g,nt=/%5E/g,qt=/%60/g,rt=/%7B/g,jt=/%7C/g,st=/%7D/g,Ft=/%20/g;function Ce(e){return e==null?"":encodeURI(""+e).replace(jt,"|").replace(Mt,"[").replace(Ht,"]")}function Wt(e){return Ce(e).replace(rt,"{").replace(st,"}").replace(nt,"^")}function Re(e){return Ce(e).replace(tt,"%2B").replace(Ft,"+").replace(et,"%23").replace(Gt,"%26").replace(qt,"`").replace(rt,"{").replace(st,"}").replace(nt,"^")}function Kt(e){return Re(e).replace(Vt,"%3D")}function zt(e){return Ce(e).replace(et,"%23").replace(Ut,"%3F")}function Qt(e){return zt(e).replace(Bt,"%2F")}function ne(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Xt=/\/$/,Yt=e=>e.replace(Xt,"");function ge(e,t,n="/"){let r,s={},h="",c="";const p=t.indexOf("#");let a=t.indexOf("?");return a=p>=0&&a>p?-1:a,a>=0&&(r=t.slice(0,a),h=t.slice(a,p>0?p:t.length),s=e(h.slice(1))),p>=0&&(r=r||t.slice(0,p),c=t.slice(p,t.length)),r=en(r??t,n),{fullPath:r+h+c,path:r,query:s,hash:ne(c)}}function Jt(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ge(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Zt(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&z(t.matched[r],n.matched[s])&&ot(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function z(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ot(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!$t(e[n],t[n]))return!1;return!0}function $t(e,t){return B(e)?Be(e,t):B(t)?Be(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Be(e,t){return B(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function en(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let h=n.length-1,c,p;for(c=0;c<r.length;c++)if(p=r[c],p!==".")if(p==="..")h>1&&h--;else break;return n.slice(0,h).join("/")+"/"+r.slice(c).join("/")}const M={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let ye=function(e){return e.pop="pop",e.push="push",e}({}),ve=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function tn(e){if(!e)if(K){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Yt(e)}const nn=/^[^#]+#/;function rn(e,t){return e.replace(nn,"#")+t}function sn(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ie=()=>({left:window.scrollX,top:window.scrollY});function on(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=sn(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ve(e,t){return(history.state?history.state.position-t:-1)+e}const Ae=new Map;function an(e,t){Ae.set(e,t)}function cn(e){const t=Ae.get(e);return Ae.delete(e),t}function ln(e){return typeof e=="string"||e&&typeof e=="object"}function it(e){return typeof e=="string"||typeof e=="symbol"}let S=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const at=Symbol("");S.MATCHER_NOT_FOUND+"",S.NAVIGATION_GUARD_REDIRECT+"",S.NAVIGATION_ABORTED+"",S.NAVIGATION_CANCELLED+"",S.NAVIGATION_DUPLICATED+"";function Q(e,t){return w(new Error,{type:e,[at]:!0},t)}function V(e,t){return e instanceof Error&&at in e&&(t==null||!!(e.type&t))}const un=["params","query","hash"];function fn(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of un)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function hn(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(tt," "),h=s.indexOf("="),c=ne(h<0?s:s.slice(0,h)),p=h<0?null:ne(s.slice(h+1));if(c in t){let a=t[c];B(a)||(a=t[c]=[a]),a.push(p)}else t[c]=p}return t}function Ue(e){let t="";for(let n in e){const r=e[n];if(n=Kt(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(B(r)?r.map(s=>s&&Re(s)):[r&&Re(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function dn(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=B(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const pn=Symbol(""),Me=Symbol(""),ae=Symbol(""),Oe=Symbol(""),_e=Symbol("");function Z(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function H(e,t,n,r,s,h=c=>c()){const c=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((p,a)=>{const f=l=>{l===!1?a(Q(S.NAVIGATION_ABORTED,{from:n,to:t})):l instanceof Error?a(l):ln(l)?a(Q(S.NAVIGATION_GUARD_REDIRECT,{from:t,to:l})):(c&&r.enterCallbacks[s]===c&&typeof l=="function"&&c.push(l),p())},u=h(()=>e.call(r&&r.instances[s],t,n,f));let o=Promise.resolve(u);e.length<3&&(o=o.then(f)),o.catch(l=>a(l))})}function Ee(e,t,n,r,s=h=>h()){const h=[];for(const c of e)for(const p in c.components){let a=c.components[p];if(!(t!=="beforeRouteEnter"&&!c.instances[p]))if($e(a)){const f=(a.__vccOpts||a)[t];f&&h.push(H(f,n,r,c,p,s))}else{let f=a();h.push(()=>f.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${p}" at "${c.path}"`);const o=Lt(u)?u.default:u;c.mods[p]=u,c.components[p]=o;const l=(o.__vccOpts||o)[t];return l&&H(l,n,r,c,p,s)()}))}}return h}function mn(e,t){const n=[],r=[],s=[],h=Math.max(t.matched.length,e.matched.length);for(let c=0;c<h;c++){const p=t.matched[c];p&&(e.matched.find(f=>z(f,p))?r.push(p):n.push(p));const a=e.matched[c];a&&(t.matched.find(f=>z(f,a))||s.push(a))}return[n,r,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let gn=()=>location.protocol+"//"+location.host;function ct(e,t){const{pathname:n,search:r,hash:s}=t,h=e.indexOf("#");if(h>-1){let c=s.includes(e.slice(h))?e.slice(h).length:1,p=s.slice(c);return p[0]!=="/"&&(p="/"+p),Ge(p,"")}return Ge(n,e)+r+s}function vn(e,t,n,r){let s=[],h=[],c=null;const p=({state:l})=>{const d=ct(e,location),_=n.value,C=t.value;let N=0;if(l){if(n.value=d,t.value=l,c&&c===_){c=null;return}N=C?l.position-C.position:0}else r(d);s.forEach(P=>{P(n.value,_,{delta:N,type:ye.pop,direction:N?N>0?ve.forward:ve.back:ve.unknown})})};function a(){c=n.value}function f(l){s.push(l);const d=()=>{const _=s.indexOf(l);_>-1&&s.splice(_,1)};return h.push(d),d}function u(){if(document.visibilityState==="hidden"){const{history:l}=window;if(!l.state)return;l.replaceState(w({},l.state,{scroll:ie()}),"")}}function o(){for(const l of h)l();h=[],window.removeEventListener("popstate",p),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",p),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:f,destroy:o}}function He(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?ie():null}}function En(e){const{history:t,location:n}=window,r={value:ct(e,n)},s={value:t.state};s.value||h(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function h(a,f,u){const o=e.indexOf("#"),l=o>-1?(n.host&&document.querySelector("base")?e:e.slice(o))+a:gn()+e+a;try{t[u?"replaceState":"pushState"](f,"",l),s.value=f}catch(d){console.error(d),n[u?"replace":"assign"](l)}}function c(a,f){h(a,w({},t.state,He(s.value.back,a,s.value.forward,!0),f,{position:s.value.position}),!0),r.value=a}function p(a,f){const u=w({},s.value,t.state,{forward:a,scroll:ie()});h(u.current,u,!0),h(a,w({},He(r.value,a,null),{position:u.position+1},f),!1),r.value=a}return{location:r,state:s,push:p,replace:c}}function Rn(e){e=tn(e);const t=En(e),n=vn(e,t.state,t.location,t.replace);function r(h,c=!0){c||n.pauseListeners(),history.go(h)}const s=w({location:"",base:e,go:r,createHref:rn.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}let j=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var b=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(b||{});const yn={type:j.Static,value:""},An=/[a-zA-Z0-9_]/;function _n(e){if(!e)return[[]];if(e==="/")return[[yn]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${f}": ${d}`)}let n=b.Static,r=n;const s=[];let h;function c(){h&&s.push(h),h=[]}let p=0,a,f="",u="";function o(){f&&(n===b.Static?h.push({type:j.Static,value:f}):n===b.Param||n===b.ParamRegExp||n===b.ParamRegExpEnd?(h.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),h.push({type:j.Param,value:f,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),f="")}function l(){f+=a}for(;p<e.length;){if(a=e[p++],a==="\\"&&n!==b.ParamRegExp){r=n,n=b.EscapeNext;continue}switch(n){case b.Static:a==="/"?(f&&o(),c()):a===":"?(o(),n=b.Param):l();break;case b.EscapeNext:l(),n=r;break;case b.Param:a==="("?n=b.ParamRegExp:An.test(a)?l():(o(),n=b.Static,a!=="*"&&a!=="?"&&a!=="+"&&p--);break;case b.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=b.ParamRegExpEnd:u+=a;break;case b.ParamRegExpEnd:o(),n=b.Static,a!=="*"&&a!=="?"&&a!=="+"&&p--,u="";break;default:t("Unknown state");break}}return n===b.ParamRegExp&&t(`Unfinished custom RegExp for param "${f}"`),o(),c(),s}const qe="[^/]+?",wn={sensitive:!1,strict:!1,start:!0,end:!0};var T=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(T||{});const Cn=/[.+*?^${}()[\]/\\]/g;function On(e,t){const n=w({},wn,t),r=[];let s=n.start?"^":"";const h=[];for(const f of e){const u=f.length?[]:[T.Root];n.strict&&!f.length&&(s+="/");for(let o=0;o<f.length;o++){const l=f[o];let d=T.Segment+(n.sensitive?T.BonusCaseSensitive:0);if(l.type===j.Static)o||(s+="/"),s+=l.value.replace(Cn,"\\$&"),d+=T.Static;else if(l.type===j.Param){const{value:_,repeatable:C,optional:N,regexp:P}=l;h.push({name:_,repeatable:C,optional:N});const A=P||qe;if(A!==qe){d+=T.BonusCustomRegExp;try{`${A}`}catch(G){throw new Error(`Invalid custom RegExp for param "${_}" (${A}): `+G.message)}}let O=C?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;o||(O=N&&f.length<2?`(?:/${O})`:"/"+O),N&&(O+="?"),s+=O,d+=T.Dynamic,N&&(d+=T.BonusOptional),C&&(d+=T.BonusRepeatable),A===".*"&&(d+=T.BonusWildcard)}u.push(d)}r.push(u)}if(n.strict&&n.end){const f=r.length-1;r[f][r[f].length-1]+=T.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const c=new RegExp(s,n.sensitive?"":"i");function p(f){const u=f.match(c),o={};if(!u)return null;for(let l=1;l<u.length;l++){const d=u[l]||"",_=h[l-1];o[_.name]=d&&_.repeatable?d.split("/"):d}return o}function a(f){let u="",o=!1;for(const l of e){(!o||!u.endsWith("/"))&&(u+="/"),o=!1;for(const d of l)if(d.type===j.Static)u+=d.value;else if(d.type===j.Param){const{value:_,repeatable:C,optional:N}=d,P=_ in f?f[_]:"";if(B(P)&&!C)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const A=B(P)?P.join("/"):P;if(!A)if(N)l.length<2&&(u.endsWith("/")?u=u.slice(0,-1):o=!0);else throw new Error(`Missing required param "${_}"`);u+=A}}return u||"/"}return{re:c,score:r,keys:h,parse:p,stringify:a}}function Nn(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===T.Static+T.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===T.Static+T.Segment?1:-1:0}function lt(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const h=Nn(r[n],s[n]);if(h)return h;n++}if(Math.abs(s.length-r.length)===1){if(je(r))return 1;if(je(s))return-1}return s.length-r.length}function je(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Pn={strict:!1,end:!0,sensitive:!1};function Sn(e,t,n){const r=On(_n(e.path),n),s=w(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function In(e,t){const n=[],r=new Map;t=Le(Pn,t);function s(o){return r.get(o)}function h(o,l,d){const _=!d,C=We(o);C.aliasOf=d&&d.record;const N=Le(t,o),P=[C];if("alias"in o){const G=typeof o.alias=="string"?[o.alias]:o.alias;for(const q of G)P.push(We(w({},C,{components:d?d.record.components:C.components,path:q,aliasOf:d?d.record:C})))}let A,O;for(const G of P){const{path:q}=G;if(l&&q[0]!=="/"){const U=l.record.path,L=U[U.length-1]==="/"?"":"/";G.path=l.record.path+(q&&L+q)}if(A=Sn(G,l,N),d?d.alias.push(A):(O=O||A,O!==A&&O.alias.push(A),_&&o.name&&!Ke(A)&&c(o.name)),ut(A)&&a(A),C.children){const U=C.children;for(let L=0;L<U.length;L++)h(U[L],A,d&&d.children[L])}d=d||A}return O?()=>{c(O)}:te}function c(o){if(it(o)){const l=r.get(o);l&&(r.delete(o),n.splice(n.indexOf(l),1),l.children.forEach(c),l.alias.forEach(c))}else{const l=n.indexOf(o);l>-1&&(n.splice(l,1),o.record.name&&r.delete(o.record.name),o.children.forEach(c),o.alias.forEach(c))}}function p(){return n}function a(o){const l=Tn(o,n);n.splice(l,0,o),o.record.name&&!Ke(o)&&r.set(o.record.name,o)}function f(o,l){let d,_={},C,N;if("name"in o&&o.name){if(d=r.get(o.name),!d)throw Q(S.MATCHER_NOT_FOUND,{location:o});N=d.record.name,_=w(Fe(l.params,d.keys.filter(O=>!O.optional).concat(d.parent?d.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),o.params&&Fe(o.params,d.keys.map(O=>O.name))),C=d.stringify(_)}else if(o.path!=null)C=o.path,d=n.find(O=>O.re.test(C)),d&&(_=d.parse(C),N=d.record.name);else{if(d=l.name?r.get(l.name):n.find(O=>O.re.test(l.path)),!d)throw Q(S.MATCHER_NOT_FOUND,{location:o,currentLocation:l});N=d.record.name,_=w({},l.params,o.params),C=d.stringify(_)}const P=[];let A=d;for(;A;)P.unshift(A.record),A=A.parent;return{name:N,path:C,params:_,matched:P,meta:bn(P)}}e.forEach(o=>h(o));function u(){n.length=0,r.clear()}return{addRoute:h,resolve:f,removeRoute:c,clearRoutes:u,getRoutes:p,getRecordMatcher:s}}function Fe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function We(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:xn(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function xn(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Ke(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function bn(e){return e.reduce((t,n)=>w(t,n.meta),{})}function Tn(e,t){let n=0,r=t.length;for(;n!==r;){const h=n+r>>1;lt(e,t[h])<0?r=h:n=h+1}const s=Dn(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Dn(e){let t=e;for(;t=t.parent;)if(ut(t)&&lt(e,t)===0)return t}function ut({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ze(e){const t=F(ae),n=F(Oe),r=k(()=>{const a=ee(e.to);return t.resolve(a)}),s=k(()=>{const{matched:a}=r.value,{length:f}=a,u=a[f-1],o=n.matched;if(!u||!o.length)return-1;const l=o.findIndex(z.bind(null,u));if(l>-1)return l;const d=Qe(a[f-2]);return f>1&&Qe(u)===d&&o[o.length-1].path!==d?o.findIndex(z.bind(null,a[f-2])):l}),h=k(()=>s.value>-1&&Vn(n.params,r.value.params)),c=k(()=>s.value>-1&&s.value===n.matched.length-1&&ot(n.params,r.value.params));function p(a={}){if(Bn(a)){const f=t[ee(e.replace)?"replace":"push"](ee(e.to)).catch(te);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:r,href:k(()=>r.value.href),isActive:h,isExactActive:c,navigate:p}}function kn(e){return e.length===1?e[0]:e}const Ln=we({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ze,setup(e,{slots:t}){const n=Nt(ze(e)),{options:r}=F(ae),s=k(()=>({[Xe(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Xe(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const h=t.default&&kn(t.default(n));return e.custom?h:Je("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},h)}}}),Gn=Ln;function Bn(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Vn(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!B(s)||s.length!==r.length||r.some((h,c)=>h.valueOf()!==s[c].valueOf()))return!1}return!0}function Qe(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Xe=(e,t,n)=>e??t??n,Un=we({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=F(_e),s=k(()=>e.route||r.value),h=F(Me,0),c=k(()=>{let f=ee(h);const{matched:u}=s.value;let o;for(;(o=u[f])&&!o.components;)f++;return f}),p=k(()=>s.value.matched[c.value]);pe(Me,k(()=>c.value+1)),pe(pn,p),pe(_e,s);const a=$();return Ct(()=>[a.value,p.value,e.name],([f,u,o],[l,d,_])=>{u&&(u.instances[o]=f,d&&d!==u&&f&&f===l&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),f&&u&&(!d||!z(u,d)||!l)&&(u.enterCallbacks[o]||[]).forEach(C=>C(f))},{flush:"post"}),()=>{const f=s.value,u=e.name,o=p.value,l=o&&o.components[u];if(!l)return Ye(n.default,{Component:l,route:f});const d=o.props[u],_=d?d===!0?f.params:typeof d=="function"?d(f):d:null,N=Je(l,w({},_,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(o.instances[u]=null)},ref:a}));return Ye(n.default,{Component:N,route:f})||N}}});function Ye(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Mn=Un;function Hn(e){const t=In(e.routes,e),n=e.parseQuery||hn,r=e.stringifyQuery||Ue,s=e.history,h=Z(),c=Z(),p=Z(),a=_t(M);let f=M;K&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=me.bind(null,i=>""+i),o=me.bind(null,Qt),l=me.bind(null,ne);function d(i,g){let m,v;return it(i)?(m=t.getRecordMatcher(i),v=g):v=i,t.addRoute(v,m)}function _(i){const g=t.getRecordMatcher(i);g&&t.removeRoute(g)}function C(){return t.getRoutes().map(i=>i.record)}function N(i){return!!t.getRecordMatcher(i)}function P(i,g){if(g=w({},g||a.value),typeof i=="string"){const E=ge(n,i,g.path),x=t.resolve({path:E.path},g),J=s.createHref(E.fullPath);return w(E,x,{params:l(x.params),hash:ne(E.hash),redirectedFrom:void 0,href:J})}let m;if(i.path!=null)m=w({},i,{path:ge(n,i.path,g.path).path});else{const E=w({},i.params);for(const x in E)E[x]==null&&delete E[x];m=w({},i,{params:o(E)}),g.params=o(g.params)}const v=t.resolve(m,g),y=i.hash||"";v.params=u(l(v.params));const I=Jt(r,w({},i,{hash:Wt(y),path:v.path})),R=s.createHref(I);return w({fullPath:I,hash:y,query:r===Ue?dn(i.query):i.query||{}},v,{redirectedFrom:void 0,href:R})}function A(i){return typeof i=="string"?ge(n,i,a.value.path):w({},i)}function O(i,g){if(f!==i)return Q(S.NAVIGATION_CANCELLED,{from:g,to:i})}function G(i){return L(i)}function q(i){return G(w(A(i),{replace:!0}))}function U(i,g){const m=i.matched[i.matched.length-1];if(m&&m.redirect){const{redirect:v}=m;let y=typeof v=="function"?v(i,g):v;return typeof y=="string"&&(y=y.includes("?")||y.includes("#")?y=A(y):{path:y},y.params={}),w({query:i.query,hash:i.hash,params:y.path!=null?{}:i.params},y)}}function L(i,g){const m=f=P(i),v=a.value,y=i.state,I=i.force,R=i.replace===!0,E=U(m,v);if(E)return L(w(A(E),{state:typeof E=="object"?w({},y,E.state):y,force:I,replace:R}),g||m);const x=m;x.redirectedFrom=g;let J;return!I&&Zt(r,v,m)&&(J=Q(S.NAVIGATION_DUPLICATED,{to:x,from:v}),be(v,v,!0,!1)),(J?Promise.resolve(J):Pe(x,v)).catch(D=>V(D)?V(D,S.NAVIGATION_GUARD_REDIRECT)?D:fe(D):ue(D,x,v)).then(D=>{if(D){if(V(D,S.NAVIGATION_GUARD_REDIRECT))return L(w({replace:R},A(D.to),{state:typeof D.to=="object"?w({},y,D.to.state):y,force:I}),g||x)}else D=Ie(x,v,!0,R,y);return Se(x,v,D),D})}function ht(i,g){const m=O(i,g);return m?Promise.reject(m):Promise.resolve()}function ce(i){const g=se.values().next().value;return g&&typeof g.runWithContext=="function"?g.runWithContext(i):i()}function Pe(i,g){let m;const[v,y,I]=mn(i,g);m=Ee(v.reverse(),"beforeRouteLeave",i,g);for(const E of v)E.leaveGuards.forEach(x=>{m.push(H(x,i,g))});const R=ht.bind(null,i,g);return m.push(R),W(m).then(()=>{m=[];for(const E of h.list())m.push(H(E,i,g));return m.push(R),W(m)}).then(()=>{m=Ee(y,"beforeRouteUpdate",i,g);for(const E of y)E.updateGuards.forEach(x=>{m.push(H(x,i,g))});return m.push(R),W(m)}).then(()=>{m=[];for(const E of I)if(E.beforeEnter)if(B(E.beforeEnter))for(const x of E.beforeEnter)m.push(H(x,i,g));else m.push(H(E.beforeEnter,i,g));return m.push(R),W(m)}).then(()=>(i.matched.forEach(E=>E.enterCallbacks={}),m=Ee(I,"beforeRouteEnter",i,g,ce),m.push(R),W(m))).then(()=>{m=[];for(const E of c.list())m.push(H(E,i,g));return m.push(R),W(m)}).catch(E=>V(E,S.NAVIGATION_CANCELLED)?E:Promise.reject(E))}function Se(i,g,m){p.list().forEach(v=>ce(()=>v(i,g,m)))}function Ie(i,g,m,v,y){const I=O(i,g);if(I)return I;const R=g===M,E=K?history.state:{};m&&(v||R?s.replace(i.fullPath,w({scroll:R&&E&&E.scroll},y)):s.push(i.fullPath,y)),a.value=i,be(i,g,m,R),fe()}let X;function dt(){X||(X=s.listen((i,g,m)=>{if(!Y.listening)return;const v=P(i),y=U(v,Y.currentRoute.value);if(y){L(w(y,{replace:!0,force:!0}),v).catch(te);return}f=v;const I=a.value;K&&an(Ve(I.fullPath,m.delta),ie()),Pe(v,I).catch(R=>V(R,S.NAVIGATION_ABORTED|S.NAVIGATION_CANCELLED)?R:V(R,S.NAVIGATION_GUARD_REDIRECT)?(L(w(A(R.to),{force:!0}),v).then(E=>{V(E,S.NAVIGATION_ABORTED|S.NAVIGATION_DUPLICATED)&&!m.delta&&m.type===ye.pop&&s.go(-1,!1)}).catch(te),Promise.reject()):(m.delta&&s.go(-m.delta,!1),ue(R,v,I))).then(R=>{R=R||Ie(v,I,!1),R&&(m.delta&&!V(R,S.NAVIGATION_CANCELLED)?s.go(-m.delta,!1):m.type===ye.pop&&V(R,S.NAVIGATION_ABORTED|S.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),Se(v,I,R)}).catch(te)}))}let le=Z(),xe=Z(),re;function ue(i,g,m){fe(i);const v=xe.list();return v.length?v.forEach(y=>y(i,g,m)):console.error(i),Promise.reject(i)}function pt(){return re&&a.value!==M?Promise.resolve():new Promise((i,g)=>{le.add([i,g])})}function fe(i){return re||(re=!i,dt(),le.list().forEach(([g,m])=>i?m(i):g()),le.reset()),i}function be(i,g,m,v){const{scrollBehavior:y}=e;if(!K||!y)return Promise.resolve();const I=!m&&cn(Ve(i.fullPath,0))||(v||!m)&&history.state&&history.state.scroll||null;return Ot().then(()=>y(i,g,I)).then(R=>R&&on(R)).catch(R=>ue(R,i,g))}const he=i=>s.go(i);let de;const se=new Set,Y={currentRoute:a,listening:!0,addRoute:d,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:N,getRoutes:C,resolve:P,options:e,push:G,replace:q,go:he,back:()=>he(-1),forward:()=>he(1),beforeEach:h.add,beforeResolve:c.add,afterEach:p.add,onError:xe.add,isReady:pt,install(i){i.component("RouterLink",Gn),i.component("RouterView",Mn),i.config.globalProperties.$router=Y,Object.defineProperty(i.config.globalProperties,"$route",{enumerable:!0,get:()=>ee(a)}),K&&!de&&a.value===M&&(de=!0,G(s.location).catch(v=>{}));const g={};for(const v in M)Object.defineProperty(g,v,{get:()=>a.value[v],enumerable:!0});i.provide(ae,Y),i.provide(Oe,wt(g)),i.provide(_e,a);const m=i.unmount;se.add(i),i.unmount=function(){se.delete(i),se.size<1&&(f=M,X&&X(),X=null,a.value=M,de=!1,re=!1),m()}}};function W(i){return i.reduce((g,m)=>g.then(()=>ce(m)),Promise.resolve())}return Y}function Kn(){return F(ae)}function zn(e){return F(Oe)}const ft=Hn({history:Rn(),routes:[{path:"/",name:"home",component:()=>oe(()=>import("./HomeView-BO7XplIC.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresAuth:!0}},{path:"/script/:name",name:"script",component:()=>oe(()=>import("./ScriptView-BaXSi1xL.js"),__vite__mapDeps([6,1,2,3,4,5])),meta:{requiresAuth:!0}},{path:"/history",name:"history",component:()=>oe(()=>import("./HistoryView-CmSS7PsO.js"),__vite__mapDeps([7,1,2,3,4,5])),meta:{requiresAuth:!0}},{path:"/history/:id",name:"history-detail",component:()=>oe(()=>import("./HistoryDetailView-CuaNgiMV.js"),__vite__mapDeps([8,1,2,3,4,5])),meta:{requiresAuth:!0}}]});ft.beforeEach(async e=>{if(e.meta.requiresAuth){const t=Ze();if(t.initialized||await t.init(),!t.isAuthenticated){const n=encodeURIComponent(e.fullPath);return window.location.href=`/login.html?next=${n}`,!1}}});const Ne=Pt(Tt);Ne.use(It());Ne.use(ft);Ne.mount("#app");export{De as a,Kn as b,Ze as c,zn as u};
